@page "/Users"

@inherits ServicePageBase<USERS, IUserService>

<AuthenticationView>
    <Authenticated>
        <GenGrid DataSource="@DataSource" TModel="USERS"
                 EditMode="EditMode.Inline"
                 MaxWidth="MaxWidth.ExtraLarge"
                 Create="CreateAsync"
                 Update="UpdateAsync"
                 Delete="DeleteAsync"
                 Cancel="Cancel"
                 Search="FindByParametersAsync"
                 Title="Users"
                 FixedFooter="true"
                 Height="500">

            <GenSearchFields>

                <GenCheckBox BindingField="@nameof(USERS.UB_IS_ACTIVE)" Label="Is Active"
                             TrueText="Yes"
                             FalseText="No"
                             xs="12" sm="12" md="12" lg="3" xl="3" xxl="3"/>

                <GenTextField BindingField="@nameof(USERS.UB_TYPE)"
                              Label="User Type"
                              xs="12" sm="12" md="12" lg="3" xl="3" xxl="3" />

            </GenSearchFields>

            <GenColumns>
                <GenTextField BindingField="@nameof(USERS.U_NAME)" Label="Name" />
                <GenTextField BindingField="@nameof(USERS.U_SURNAME)" Label="Surname" />
                <GenTextField BindingField="@nameof(USERS.U_EMAIL)" Label="Email" />
                <GenTextField BindingField="@nameof(USERS.U_PHONE_NUMBER)" Label="Phone" />
                <GenTextField BindingField="@nameof(USERS.UB_PASSWORD)"
                              InputType="InputType.Password"
                              Label="Password" />
                
                <GenCheckBox BindingField="@nameof(USERS.UB_IS_ACTIVE)" Label="Is Active"
                             TrueText="Yes"
                             FalseText="No" />
            </GenColumns>
            <GenDetailGrid>
                <MudTabs Class="mt-5" Style="width:100%!important" Color="Color.Primary">
                    <MudTabPanel Text="Roles">
                        <UserRolesPage ParentModel="context" AUTH_TYPE="@nameof(ROLES)" />
                    </MudTabPanel>
                    <MudTabPanel Text="Permissions">
                        <UserRolesPage ParentModel="context" AUTH_TYPE="@nameof(PERMISSIONS)" />
                    </MudTabPanel>
                </MudTabs>
            </GenDetailGrid>
        </GenGrid>


    </Authenticated>
</AuthenticationView>


@code{
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        await ReadAsync(default);
    }
}